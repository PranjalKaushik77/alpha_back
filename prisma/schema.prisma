generator client {
  provider        = "prisma-client"
  output          = "../app/generated/prisma"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model Video {
  id              String   @id @default(uuid())
  muxUploadId     String?  @unique
  muxAssetId      String?  @unique
  muxPlaybackId   String?
  status          String
  transcript      String?
  summary         String?
  description     String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  isLiveRecording Boolean  @default(false)
  liveStreamMuxId String?

  @@index([isLiveRecording])
  @@index([status])
}

model liveStream {
  id              String    @id
  muxLiveStreamId String    @unique
  streamKey       String    @unique
  muxPlaybackId   String?
  status          String    @default("IDLE")
  createdAt       DateTime  @default(now())
  updatedAt       DateTime
  endedAt         DateTime?

  @@index([status])
}
